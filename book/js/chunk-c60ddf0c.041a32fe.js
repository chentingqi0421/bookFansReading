(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c60ddf0c"],{1148:function(t,a,o){"use strict";var e=o("a691"),i=o("1d80");t.exports="".repeat||function(t){var a=String(i(this)),o="",r=e(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(a+=a))1&r&&(o+=a);return o}},"1dde":function(t,a,o){var e=o("d039"),i=o("b622"),r=o("2d00"),n=i("species");t.exports=function(t){return r>=51||!e((function(){var a=[],o=a.constructor={};return o[n]=function(){return{foo:1}},1!==a[t](Boolean).foo}))}},"25f0":function(t,a,o){"use strict";var e=o("6eeb"),i=o("825a"),r=o("d039"),n=o("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=r((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),d=c.name!=s;(u||d)&&e(RegExp.prototype,s,(function(){var t=i(this),a=String(t.source),o=t.flags,e=String(void 0===o&&t instanceof RegExp&&!("flags"in l)?n.call(t):o);return"/"+a+"/"+e}),{unsafe:!0})},"408a":function(t,a,o){var e=o("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=e(t))throw TypeError("Incorrect invocation");return+t}},8418:function(t,a,o){"use strict";var e=o("c04e"),i=o("9bf2"),r=o("5c6c");t.exports=function(t,a,o){var n=e(a);n in t?i.f(t,n,r(0,o)):t[n]=o}},"857a":function(t,a,o){var e=o("1d80"),i=/"/g;t.exports=function(t,a,o,r){var n=String(e(t)),s="<"+a;return""!==o&&(s+=" "+o+'="'+String(r).replace(i,"&quot;")+'"'),s+">"+n+"</"+a+">"}},9911:function(t,a,o){"use strict";var e=o("23e7"),i=o("857a"),r=o("af03");e({target:"String",proto:!0,forced:r("link")},{link:function(t){return i(this,"a","href",t)}})},ad6d:function(t,a,o){"use strict";var e=o("825a");t.exports=function(){var t=e(this),a="";return t.global&&(a+="g"),t.ignoreCase&&(a+="i"),t.multiline&&(a+="m"),t.dotAll&&(a+="s"),t.unicode&&(a+="u"),t.sticky&&(a+="y"),a}},ae40:function(t,a,o){var e=o("83ab"),i=o("d039"),r=o("5135"),n=Object.defineProperty,s={},l=function(t){throw t};t.exports=function(t,a){if(r(s,t))return s[t];a||(a={});var o=[][t],c=!!r(a,"ACCESSORS")&&a.ACCESSORS,u=r(a,0)?a[0]:l,d=r(a,1)?a[1]:void 0;return s[t]=!!o&&!i((function(){if(c&&!e)return!0;var t={length:-1};c?n(t,1,{enumerable:!0,get:l}):t[1]=1,o.call(t,u,d)}))}},af03:function(t,a,o){var e=o("d039");t.exports=function(t){return e((function(){var a=""[t]('"');return a!==a.toLowerCase()||a.split('"').length>3}))}},b680:function(t,a,o){"use strict";var e=o("23e7"),i=o("a691"),r=o("408a"),n=o("1148"),s=o("d039"),l=1..toFixed,c=Math.floor,u=function(t,a,o){return 0===a?o:a%2===1?u(t,a-1,o*t):u(t*t,a/2,o)},d=function(t){var a=0,o=t;while(o>=4096)a+=12,o/=4096;while(o>=2)a+=1,o/=2;return a},h=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));e({target:"Number",proto:!0,forced:h},{toFixed:function(t){var a,o,e,s,l=r(this),h=i(t),f=[0,0,0,0,0,0],v="",p="0",b=function(t,a){var o=-1,e=a;while(++o<6)e+=t*f[o],f[o]=e%1e7,e=c(e/1e7)},g=function(t){var a=6,o=0;while(--a>=0)o+=f[a],f[a]=c(o/t),o=o%t*1e7},k=function(){var t=6,a="";while(--t>=0)if(""!==a||0===t||0!==f[t]){var o=String(f[t]);a=""===a?o:a+n.call("0",7-o.length)+o}return a};if(h<0||h>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(v="-",l=-l),l>1e-21)if(a=d(l*u(2,69,1))-69,o=a<0?l*u(2,-a,1):l/u(2,a,1),o*=4503599627370496,a=52-a,a>0){b(0,o),e=h;while(e>=7)b(1e7,0),e-=7;b(u(10,e,1),0),e=a-1;while(e>=23)g(1<<23),e-=23;g(1<<e),b(1,1),g(2),p=k()}else b(0,o),b(1<<-a,0),p=k()+n.call("0",h);return h>0?(s=p.length,p=v+(s<=h?"0."+n.call("0",h-s)+p:p.slice(0,s-h)+"."+p.slice(s-h))):p=v+p,p}})},c84b:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"detail"},[o("van-nav-bar",{attrs:{fixed:!0,title:"书籍详情","right-text":"书城","left-text":"返回","left-arrow":""},on:{"click-left":t.goBack,"click-right":t.goHome}}),o("div",{staticClass:"book-detail clearfix"},[o("img",{attrs:{src:t.bookDetail.cover,alt:""}}),o("div",{staticClass:"book-detail-word"},[o("h3",[t._v(t._s(t.bookDetail.title))]),o("div",{staticClass:"detail-ac"},[o("span",{staticClass:"book-author"},[t._v(t._s(t.bookDetail.author))]),o("span",{staticClass:"book-copyright"},[t._v(t._s(t.bookDetail.copyright))])]),o("div",{staticClass:"tw"},[o("span",{staticClass:"book-type"},[t._v(t._s(t.bookDetail.minorCate))]),o("span",{staticClass:"book-wordCount"},[t._v(t._s(t.bookDetail.wordCount))])])])]),o("ul",{staticClass:"reader-data"},[o("li",{staticClass:"score"},[o("p",[o("span",{staticClass:"star-score"},[t._v(t._s(t.readerData.score))]),o("van-rate",{attrs:{size:12,color:"#ffd21e","void-icon":"star","void-color":"#eee",gutter:0},model:{value:t.value,callback:function(a){t.value=a},expression:"value"}})],1),o("p",{staticClass:"score-count"},[t._v(t._s(t.readerData.tip))])]),o("li",[o("p",[t._v(t._s(t.bookDetail.retentionRatio)+"%")]),o("p",[t._v("读者留存")])]),o("li",[o("p",[t._v(t._s(t.bookDetail.latelyFollower))]),o("p",[t._v("7日人气")])]),o("li",[o("p",[t._v(t._s(t.bookDetail.totalFollower))]),o("p",[t._v("累计人气")])])]),o("div",{staticClass:"describe-box"},[o("h3",[t._v("简介")]),t._l(t.bookDetail.tags,(function(a,e){return o("span",{key:e,staticClass:"span-classify"},[t._v(t._s(a))])})),o("p",{class:[t.isActive?"active":""]},[t._v(" "+t._s(t.bookDetail.longIntro)+" "),o("span",{staticClass:"arrow-down"},[o("van-icon",{attrs:{name:"arrow-down"},on:{click:function(a){return t.jian()}}})],1)])],2),o("div",{staticClass:"detail-catalog",on:{click:function(a){return t.goList()}}},[o("span",{staticClass:"catalogue"},[t._v("目录")]),o("span",[t._v("1天前更新")]),o("span",[t._v(t._s(t.bookDetail.lastChapter)+" "),o("van-icon",{attrs:{name:"arrow"}})],1)]),t._m(0),t._m(1),o("van-tabbar",{model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[o("van-tabbar-item",{attrs:{name:"zhui"},on:{click:t.addBookshelf}},[o("span",{staticClass:"add"},[t._v("+")]),t._v("加入书架")]),o("van-tabbar-item",{staticClass:"startRead",attrs:{name:"kai"},on:{click:function(a){return t.startRead()}}},[t._v("开始阅读")]),o("van-tabbar-item",{attrs:{name:"xia"}},[o("span",{staticClass:"jian"},[t._v("↓")]),t._v("下载")])],1)],1)},i=[function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"hot-short"},[o("h5",{staticClass:"hot-title"},[t._v("热门短评")]),o("ul",{staticClass:"hot-content"}),o("div",{staticClass:"all-ping"},[t._v("查看全部短评")])])},function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"hot-book"},[o("h5",{staticClass:"hot-title"},[t._v("热门书评")]),o("ul",{staticClass:"hot-content"}),o("div",{staticClass:"all-ping"},[t._v("全部书评")])])}],r=(o("fb6a"),o("b680"),o("d3b7"),o("25f0"),o("9911"),o("eadb"),{data:function(){return{bookName:"",value:5,readerData:"",bookDetail:"",isActive:!1,active:"kai",shuYuanId:"",link:""}},created:function(){this.startDetail(),this.bookStart(),console.log(this.$route.query)},methods:{goBack:function(){this.$router.go(-1)},goHome:function(){this.$router.push({path:"/main/home"})},jian:function(){this.isActive=!this.isActive},startDetail:function(){var t=this,a=this.$route.query.bookId;this.axios({method:"GET",url:"http://novel.kele8.cn/book-info/"+a}).then((function(a){if(200===a.status){a.data.rating.score=a.data.rating.score.toFixed(1),t.readerData=a.data.rating,a.data.cover="https://statics.zhuishushenqi.com"+a.data.cover,a.data.latelyFollower=a.data.latelyFollower.toString();var o=a.data.latelyFollower.length;o>4&&(a.data.latelyFollower=a.data.latelyFollower.slice(0,o-4)+"."+a.data.latelyFollower.substr(o-4,1)+"万"),a.data.totalFollower=a.data.totalFollower.toString();var e=a.data.totalFollower.length;e>4&&(a.data.totalFollower=a.data.totalFollower.slice(0,e-4)+"."+a.data.totalFollower.substr(e-4,1)+"万"),a.data.wordCount=a.data.wordCount.toString();var i=a.data.wordCount.length;i>4&&(a.data.wordCount=a.data.wordCount.slice(0,i-4)+"万"),t.bookDetail=a.data}})).catch((function(a){t.$toast.clear()}))},bookStart:function(){var t=this,a=this.$route.query.bookId;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"http://novel.kele8.cn/book-sources",params:{view:"summary",book:a}}).then((function(a){t.$toast.clear(),t.shuYuanId=a.data[0]._id})).catch((function(a){t.$toast.clear()}))},goList:function(){var t=this.shuYuanId;this.$router.push({name:"CatalogList",query:{_id:t,bookName:this.bookDetail.title}})},addBookshelf:function(){var t=this,a=this.$route.query.bookId;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"GET",url:"http://novel.kele8.cn/book-chapters/"+this.shuYuanId}).then((function(o){var e=o.data.chapters[0].link;t.axios({method:"get",url:"http://www.linkk.asia:10001/user/addBookshelf",params:{token:localStorage.getItem("token"),bookid:a,shuYuanId:t.shuYuanId,link:e}}).then((function(a){t.$toast.clear(),200==a.data.code?t.$toast("加入书架成功"):t.$toast(a.data.msg)})).catch((function(a){t.$toast.clear()}))})).catch((function(a){t.$toast.clear()}))},startRead:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"});var a=this.bookDetail.title;localStorage.getItem("read_chapter_"+this.shuYuanId)||localStorage.setItem("read_chapter_"+this.shuYuanId,0);var o=localStorage.getItem("read_chapter_"+this.shuYuanId);this.axios({method:"GET",url:"http://novel.kele8.cn/book-chapters/"+this.shuYuanId}).then((function(e){t.$toast.clear();var i=t.bookDetail.title,r=t.shuYuanId,n=e.data.chapters[o].link;t.$router.push({path:"/reader",query:{link:n,shuYuanId:r,index:o,title:a,bookName:i,_id:r}})})).catch((function(a){t.$toast.clear()}))}}}),n=r,s=o("2877"),l=Object(s["a"])(n,e,i,!1,null,"66cefdce",null);a["default"]=l.exports},e8b5:function(t,a,o){var e=o("c6b6");t.exports=Array.isArray||function(t){return"Array"==e(t)}},eadb:function(t,a,o){},fb6a:function(t,a,o){"use strict";var e=o("23e7"),i=o("861d"),r=o("e8b5"),n=o("23cb"),s=o("50c4"),l=o("fc6a"),c=o("8418"),u=o("b622"),d=o("1dde"),h=o("ae40"),f=d("slice"),v=h("slice",{ACCESSORS:!0,0:0,1:2}),p=u("species"),b=[].slice,g=Math.max;e({target:"Array",proto:!0,forced:!f||!v},{slice:function(t,a){var o,e,u,d=l(this),h=s(d.length),f=n(t,h),v=n(void 0===a?h:a,h);if(r(d)&&(o=d.constructor,"function"!=typeof o||o!==Array&&!r(o.prototype)?i(o)&&(o=o[p],null===o&&(o=void 0)):o=void 0,o===Array||void 0===o))return b.call(d,f,v);for(e=new(void 0===o?Array:o)(g(v-f,0)),u=0;f<v;f++,u++)f in d&&c(e,u,d[f]);return e.length=u,e}})}}]);
//# sourceMappingURL=chunk-c60ddf0c.041a32fe.js.map