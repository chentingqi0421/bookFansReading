{"version":3,"sources":["webpack:///./src/views/mainViews/Search.vue?bdce","webpack:///src/views/mainViews/Search.vue","webpack:///./src/views/mainViews/Search.vue?d432","webpack:///./src/views/mainViews/Search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","goBack","goHome","onSearch","$event","confirmSearch","scopedSlots","_u","key","fn","_v","proxy","model","value","callback","$$v","expression","randomArr","_l","item","index","sHot","word","_s","removeRecord","title","directives","name","rawName","cList","staticRenderFns","component"],"mappings":"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","file":"js/chunk-7448874c.fa1c6aea.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"search\"},[_c('van-nav-bar',{attrs:{\"fixed\":true,\"title\":\"搜索\",\"right-text\":\"书城\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":_vm.goBack,\"click-right\":_vm.goHome}}),_c('div',{staticClass:\"nav\"},[_c('div',{staticClass:\"nav-s\"},[_c('van-search',{attrs:{\"show-action\":\"\",\"placeholder\":\"请输入小说名\",\"shape\":\"round\",\"autofocus\":\"true\"},on:{\"search\":_vm.onSearch,\"input\":function($event){return _vm.confirmSearch()}},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('div',{on:{\"click\":_vm.onSearch}},[_vm._v(\"搜索\")])]},proxy:true}]),model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}})],1)]),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"hot\"},[_c('div',{staticClass:\"hot-head clearfix\"},[_c('div',{staticClass:\"hot-title fl\"},[_vm._v(\"搜索热词\")]),_c('div',{staticClass:\"hot-more fr\",on:{\"click\":_vm.randomArr}},[_c('span',[_vm._v(\"换一批\")]),_c('span',[_c('van-icon',{attrs:{\"name\":\"replay\"}})],1)])]),_c('ul',{staticClass:\"hot-label clearfix\"},_vm._l((_vm.hotwords),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.sHot(item.word)}}},[_vm._v(\" \"+_vm._s(item.word)+\" \")])}),0)])]),_c('div',{staticClass:\"history-box\"},[_c('div',{staticClass:\"history-head clearfix\"},[_c('div',{staticClass:\"history-title fl\"},[_vm._v(\"搜索历史\")]),_c('div',{staticClass:\"history-right fr clearfix\"},[_c('div',{staticClass:\"fl history-text\",on:{\"click\":_vm.removeRecord}},[_vm._v(\"删除历史\")]),_c('div',{staticClass:\"fr history-icon\"},[_c('van-icon',{attrs:{\"name\":\"delete\"}})],1)])]),_c('ul',{staticClass:\"history-label clearfix\"},_vm._l((_vm.searchHistory),function(item,index){return _c('li',{key:index},[_vm._v(\" \"+_vm._s(item.title)+\" \")])}),0)]),_c('ul',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.iShow),expression:\"iShow\"}],staticClass:\"search-list\"},_vm._l((_vm.searchListData),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.cList(item)}}},[_c('van-icon',{attrs:{\"name\":\"orders-o\"}}),_vm._v(\" \"+_vm._s(item.title)+\" \")],1)}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div class=\"search\">\r\n\t\t<van-nav-bar :fixed=\"true\" title=\"搜索\" right-text=\"书城\" left-text=\"返回\" left-arrow @click-left=\"goBack\" @click-right=\"goHome\"></van-nav-bar>\r\n\r\n\t\t<!-- 小说搜索部分 -->\r\n\t\t<div class=\"nav\">\r\n\t\t\t<div class=\"nav-s\">\r\n\t\t\t\t<van-search v-model=\"value\" show-action placeholder=\"请输入小说名\" shape=\"round\" autofocus=\"true\" @search=\"onSearch\"\r\n\t\t\t\t @input=confirmSearch()>\r\n\t\t\t\t\t<template #action>\r\n\t\t\t\t\t\t<div @click=\"onSearch\">搜索</div>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</van-search>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 搜索热词部分 -->\r\n\t\t<div class=\"content\">\r\n\t\t\t<div class=\"hot\">\r\n\t\t\t\t<div class=\"hot-head clearfix\">\r\n\t\t\t\t\t<div class=\"hot-title fl\">搜索热词</div>\r\n\t\t\t\t\t<div class=\"hot-more fr\" @click=\"randomArr\">\r\n\t\t\t\t\t\t<span>换一批</span>\r\n\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t<van-icon name=\"replay\" />\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<ul class=\"hot-label clearfix\">\r\n\t\t\t\t\t<li v-for=\"(item, index) in hotwords\" @click=\"sHot(item.word)\" :key=\"index\">\r\n\t\t\t\t\t\t{{ item.word }}\r\n\t\t\t\t\t</li>\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\r\n\t\t<!-- 搜索历史 -->\r\n\t\t<div class=\"history-box\">\r\n\t\t\t<div class=\"history-head clearfix\">\r\n\t\t\t\t<div class=\"history-title fl\">搜索历史</div>\r\n\t\t\t\t<div class=\"history-right fr clearfix\">\r\n\t\t\t\t\t<div class=\"fl history-text\" @click=\"removeRecord\">删除历史</div>\r\n\t\t\t\t\t<div class=\"fr history-icon\">\r\n\t\t\t\t\t\t<van-icon name=\"delete\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<ul class=\"history-label clearfix\">\r\n\t\t\t\t<li v-for=\"(item, index) in searchHistory\" :key=\"index\">\r\n\t\t\t\t\t{{ item.title }}\r\n\t\t\t\t</li>\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\r\n\t\t<!-- 小说列表部分 -->\r\n\t\t<ul class=\"search-list\" v-show=\"iShow\">\r\n\t\t\t<li v-for=\"(item,index) in searchListData\" :key=\"index\" @click=\"cList(item)\">\r\n\t\t\t\t<van-icon name=\"orders-o\" />\r\n\t\t\t\t{{item.title}}\r\n\t\t\t</li>\r\n\t\t</ul>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport \"../../assets/less/search.less\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvalue: \"\",\r\n\t\t\t\tallSearchData: \"\",\r\n\t\t\t\thotwords: \"\",\r\n\t\t\t\t// 搜索热词的数量\r\n\t\t\t\tlength: 8,\r\n\t\t\t\tsearchListData: [],\r\n\t\t\t\tiShow: false,\r\n\t\t\t\tsearchHistory: []\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcreated() {\r\n\t\t\tif (localStorage.getItem('searchHistory') == null) {\r\n\t\t\t\tlocalStorage.setItem('searchHistory', JSON.stringify({\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t}));\r\n\t\t\t}\r\n\t\t\tthis.searchWord();\r\n\t\t\tthis.upRecord();\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\t// 返回上一级\r\n\t\t\tgoBack() {\r\n\t\t\t\tthis.$router.go(-1);\r\n\t\t\t},\r\n\t\t\tgoHome() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/main/home'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 搜索热词 */\r\n\t\t\tonSearch() {\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'Relevant',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\ttitle: this.value,\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tvar searchHistory = JSON.parse(localStorage.getItem('searchHistory'));\r\n\r\n\t\t\t\tlet bool = true;\r\n\t\t\t\tfor (let i = 0; i < searchHistory.data.length; i++) {\r\n\t\t\t\t\tif (searchHistory.data[i].title == this.value) {\r\n\t\t\t\t\t\tbool = false;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (bool) {\r\n\t\t\t\t\tsearchHistory.data.push({\r\n\t\t\t\t\t\ttitle: this.value\r\n\t\t\t\t\t});\r\n\t\t\t\t\tlocalStorage.setItem('searchHistory', JSON.stringify(searchHistory));\r\n\t\t\t\t\tthis.upRecord();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsearchWord() {\r\n\t\t\t\t// \r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\turl: \"http://novel.kele8.cn/search-hotwords\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\t// \r\n\t\t\t\t\t\tlet arrWord = [];\r\n\t\t\t\t\t\tthis.allSearchData = result.data.searchHotWords;\r\n\t\t\t\t\t\tfor (var i = 0; i < this.length; i++) {\r\n\t\t\t\t\t\t\tarrWord.push(this.allSearchData[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.hotwords = arrWord;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tthis.$toast.clear();\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 换一批 */\r\n\t\t\trandomArr() {\r\n\t\t\t\tthis.allSearchData.sort(function() {\r\n\t\t\t\t\treturn Math.random() - 0.5;\r\n\t\t\t\t});\r\n\t\t\t\tlet arrWord = [];\r\n\t\t\t\tfor (var i = 0; i < this.length; i++) {\r\n\t\t\t\t\tarrWord.push(this.allSearchData[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthis.hotwords = arrWord;\r\n\t\t\t},\r\n\r\n\t\t\t/* 搜索内容 */\r\n\t\t\tconfirmSearch() {\r\n\t\t\t\tif ((this.value) == '') {\r\n\t\t\t\t\tthis.iShow = false;\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.axios({\r\n\t\t\t\t\t\tmethod: \"GET\",\r\n\t\t\t\t\t\turl: \"http://novel.kele8.cn/search\",\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tkeyword: this.value,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((result) => {\r\n\t\t\t\t\t\tthis.iShow = true;\r\n\r\n\t\t\t\t\t\tlet length = result.data.books.length > 10 ? 10 : result.data.books.length;\r\n\t\t\t\t\t\tthis.searchListData = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\t\t\t\t\tthis.searchListData.push(result.data.books[i])\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tthis.$toast.clear();\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 点击列表渲染数据\r\n\t\t\tcList(item) {\r\n\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tname: 'Relevant',\r\n\t\t\t\t\tquery: {\r\n\t\t\t\t\t\ttitle: item.title\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsHot(hotWord) {\r\n\r\n\t\t\t\tthis.value = hotWord;\r\n\t\t\t\tthis.confirmSearch();\r\n\t\t\t},\r\n\r\n\t\t\tupRecord() {\r\n\t\t\t\t this.searchHistory = JSON.parse(localStorage.getItem('searchHistory')).data;\r\n\t\t\t},\r\n\t\t\tremoveRecord() {\r\n\t\t\t\tlocalStorage.setItem('searchHistory', JSON.stringify({\r\n\t\t\t\t\tdata: []\r\n\t\t\t\t}));\r\n\t\t\t\tthis.searchHistory = [];\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcomponents: {},\r\n\t};\r\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=58ee00b4&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}